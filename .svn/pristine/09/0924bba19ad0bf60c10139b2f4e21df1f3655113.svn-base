var ServerUrl = "";
/**
 * 快速埋点注册页面JS
 */
$(function() {
	// 判断注册或查询
	checkSearchOrRegist();
	BPlstAppearence();
});
// 判断注册或查询
function checkSearchOrRegist() {
	var filSearch = $('#filSearch');
	var filRegist = $('#filRegist');
	filRegist.hide();
	// 为注册按钮设置点击事件
	$('#btnRegist').click(function() {
		filSearch.hide();
		filRegist.show();
	});
	// 为保存按钮注册事件
	$('#btnSave').click(function() {
		RegistBPSpeed();
	});
	// 设置请求地址
	ServerUrl = $('#contentxPath').val();
}
// 快速埋点注册
function RegistBPSpeed() {
	var txtSaveTitle = $('#txtSaveTitle').val();
	var params1 = $('#params1').val();
	var params2 = $('#params2').val();
	var params3 = $('#params3').val();
	var title1 = $('#title1').val();
	var title2 = $('#title2').val();
	var title3 = $('#title3').val();
	if (txtSaveTitle == '' || params1 == '') {
		alert('标题及参数1不可为空！');
		return;
	}
	// 发送请求
	$.ajax({
		type : "POST",
		cache : false,
		url : ServerUrl + "/BPClick/Regist",
		contentType : 'application/x-www-form-urlencoded',
		data : {
			txtSaveTitle : txtSaveTitle,
			params1 : params1,
			params2 : params2,
			params3 : params3,
			title1 : title1,
			title2 : title2,
			title3 : title3
		},
		dataType : "json",
		success : function(data) {
			alert(data.BPInfo.Msg);
			window.location.href = ServerUrl + "/BPClick/Index/1";

		},
		error : function(dd) {
			alert('error');
		}
	});
}
// 为列表设置样式信息
function BPlstAppearence() {
	// 设置列表序号信息
	var currentIndex = Number($('#currentIndex').val());
	$('#BPSpeedLst tr').each(function(i, tr) {
		$('td:first', tr).text(currentIndex + i + 1);
	});
	// 设置表格行样式
	$('#BPSpeedLst tr:even').css('backgroundColor', '#ECEFF2');
	$('#BPSpeedLst tr').click(function() {
		$('#BPSpeedLst tr').css('backgroundColor', '#fff');
		$('#BPSpeedLst tr:even').css('backgroundColor', '#ECEFF2');
		$(this).css("backgroundColor", "#FFF200");
	});
}
// 删除快速埋点
function DeleteBPSpeed(SpeedId) {
	if (confirm("确定要删除快速埋点吗？")) {
		// 发送请求
		$.ajax({
			type : "POST",
			cache : false,
			url : ServerUrl + "/BPClick/DeleteSpeed",
			contentType : 'application/x-www-form-urlencoded',
			data : {SpeedId : SpeedId},
			dataType : "json",
			success : function(data) {
				alert(data.BPInfo.Msg);
				window.location.href = ServerUrl + "/BPClick/Index/1";
			},
			error : function() {
				alert('error');
			}
		});
	}
}
